# 🔐 服务器连接指南

## 📋 当前情况

服务器 `103.151.173.98` 配置为只允许SSH密钥认证，不支持密码认证。

## 🔧 解决方案

### 方案1: 使用SSH密钥连接（推荐）

#### 1.1 检查现有SSH密钥
```bash
# 检查是否有现有的SSH密钥
ls -la ~/.ssh/
```

#### 1.2 生成新的SSH密钥（如果没有）
```bash
# 生成新的SSH密钥对
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"

# 或者生成ED25519密钥（更安全）
ssh-keygen -t ed25519 -C "your_email@example.com"
```

#### 1.3 将公钥添加到服务器
```bash
# 复制公钥内容
cat ~/.ssh/id_rsa.pub
# 或者
cat ~/.ssh/id_ed25519.pub
```

#### 1.4 在服务器上添加公钥
您需要联系服务器管理员，将您的公钥添加到服务器的 `~/.ssh/authorized_keys` 文件中。

### 方案2: 使用SSH配置文件

#### 2.1 创建SSH配置文件
```bash
# 创建或编辑SSH配置文件
nano ~/.ssh/config
```

#### 2.2 添加服务器配置
```
Host imagentx-server
    HostName 103.151.173.98
    User root
    Port 22
    IdentityFile ~/.ssh/id_rsa
    # 或者
    # IdentityFile ~/.ssh/id_ed25519
```

#### 2.3 使用配置连接
```bash
ssh imagentx-server
```

### 方案3: 临时启用密码认证

如果您有服务器的root权限，可以临时启用密码认证：

#### 3.1 在服务器上编辑SSH配置
```bash
# 在服务器上执行
nano /etc/ssh/sshd_config
```

#### 3.2 修改配置
```
PasswordAuthentication yes
PermitRootLogin yes
```

#### 3.3 重启SSH服务
```bash
# 在服务器上执行
systemctl restart sshd
```

## 🚀 上传部署包

### 使用SSH密钥上传
```bash
# 使用SSH密钥上传部署包
scp imagentx-deploy.tar.gz root@103.151.173.98:/opt/
```

### 使用SSH配置文件上传
```bash
# 使用SSH配置文件上传
scp imagentx-deploy.tar.gz imagentx-server:/opt/
```

## 📞 需要的信息

为了帮助您连接服务器，请提供以下信息：

1. **您是否有服务器的SSH密钥？**
2. **您是否有服务器的root密码？**
3. **您是否有服务器的管理权限？**
4. **服务器管理员联系方式？**

## 🔍 测试连接

### 测试SSH连接
```bash
# 测试SSH连接
ssh root@103.151.173.98

# 或者使用配置文件
ssh imagentx-server
```

### 测试SCP上传
```bash
# 测试文件上传
scp imagentx-deploy.tar.gz root@103.151.173.98:/opt/

# 或者使用配置文件
scp imagentx-deploy.tar.gz imagentx-server:/opt/
```

## 🎯 下一步操作

一旦成功连接到服务器，您就可以：

1. **上传部署包**
   ```bash
   scp imagentx-deploy.tar.gz root@103.151.173.98:/opt/
   ```

2. **在服务器上部署**
   ```bash
   ssh root@103.151.173.98
   mkdir -p /opt/imagentx
   cd /opt/imagentx
   tar -xzf /opt/imagentx-deploy.tar.gz
   chmod +x *.sh
   ./quick-deploy.sh --setup
   ./quick-deploy.sh --deploy
   ```

## 🚨 安全提醒

- 使用SSH密钥比密码更安全
- 定期更换SSH密钥
- 不要在公共网络传输SSH密钥
- 保护好私钥文件

## 📞 技术支持

如果您需要帮助：
1. 联系服务器管理员
2. 检查SSH配置
3. 查看SSH日志
4. 使用SSH调试模式：`ssh -v root@103.151.173.98`
