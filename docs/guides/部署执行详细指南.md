# ğŸš€ éƒ¨ç½²æ‰§è¡Œè¯¦ç»†æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰ç¡®è®¤æ¸…å•

### âœ… å·²å®Œæˆå‡†å¤‡
- [x] æœåŠ¡å™¨å·²è´­ä¹°å¹¶é…ç½®
- [x] åŸŸåDNSè§£æå·²é…ç½®
- [x] æ‰€æœ‰éƒ¨ç½²æ–‡ä»¶å·²å‡†å¤‡å°±ç»ª
- [x] Macç¯å¢ƒå·¥å…·å·²å®‰è£…

### ğŸ“ éœ€è¦è®°å½•çš„ä¿¡æ¯
```
æœåŠ¡å™¨IP: _________________
SSHå¯†ç : _________________
åŸŸå: imagentx.top
DNSæœåŠ¡å•†: é˜¿é‡Œäº‘
```

## ğŸš€ éƒ¨ç½²æ‰§è¡Œæ­¥éª¤

### æ­¥éª¤1: è¿æ¥æœåŠ¡å™¨ (5åˆ†é’Ÿ)

#### 1.1 åœ¨Macç»ˆç«¯ä¸­è¿æ¥æœåŠ¡å™¨
```bash
# æ‰“å¼€Macç»ˆç«¯
ssh root@[æ‚¨çš„æœåŠ¡å™¨IP]

# ç¤ºä¾‹
ssh root@123.456.789.123
```

**é¦–æ¬¡è¿æ¥æç¤º**:
```
The authenticity of host '123.456.789.123' can't be established.
ECDSA key fingerprint is SHA256:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.
Are you sure you want to continue connecting (yes/no/[fingerprint])?
```
**è¾“å…¥**: `yes`

#### 1.2 æ›´æ–°æœåŠ¡å™¨ç³»ç»Ÿ
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
apt update && apt upgrade -y
```

**é¢„æœŸè¾“å‡º**:
```
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following packages will be upgraded:
  [åŒ…åˆ—è¡¨]
Do you want to continue? [Y/n]
```
**è¾“å…¥**: `Y`

### æ­¥éª¤2: ä¸Šä¼ é¡¹ç›®ä»£ç  (10åˆ†é’Ÿ)

#### 2.1 åœ¨Macä¸Šå‡†å¤‡éƒ¨ç½²åŒ…
```bash
# åœ¨Macç»ˆç«¯ä¸­æ‰§è¡Œï¼ˆæ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼‰
cd /Users/Meteorkid/Downloads/ImagentX-master

# åˆ›å»ºéƒ¨ç½²åŒ…
tar -czf imagentx-deploy.tar.gz \
  --exclude='.git' \
  --exclude='node_modules' \
  --exclude='target' \
  --exclude='logs' \
  --exclude='temp' \
  --exclude='*.tar.gz' \
  .
```

**é¢„æœŸè¾“å‡º**:
```
tar: Removing leading `/' from member names
```

#### 2.2 ä¸Šä¼ åˆ°æœåŠ¡å™¨
```bash
# åœ¨Macç»ˆç«¯ä¸­æ‰§è¡Œ
scp imagentx-deploy.tar.gz root@[æ‚¨çš„æœåŠ¡å™¨IP]:/opt/

# ç¤ºä¾‹
scp imagentx-deploy.tar.gz root@123.456.789.123:/opt/
```

**é¢„æœŸè¾“å‡º**:
```
imagentx-deploy.tar.gz    100%   50MB   5.0MB/s   00:10
```

#### 2.3 åœ¨æœåŠ¡å™¨ä¸Šè§£å‹
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
mkdir -p /opt/imagentx
cd /opt/imagentx
tar -xzf /opt/imagentx-deploy.tar.gz
```

**é¢„æœŸè¾“å‡º**:
```
[è§£å‹æ–‡ä»¶åˆ—è¡¨]
```

### æ­¥éª¤3: é…ç½®ç¯å¢ƒå˜é‡ (5åˆ†é’Ÿ)

#### 3.1 å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
cp env.production.template .env.production
```

#### 3.2 ç¼–è¾‘ç¯å¢ƒå˜é‡
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
nano .env.production
```

#### 3.3 é‡è¦é…ç½®é¡¹ï¼ˆè¯·ä¿®æ”¹ä»¥ä¸‹å€¼ï¼‰
```bash
# æ•°æ®åº“é…ç½®
DB_USER=imagentx_user
DB_PASSWORD=YourSecurePassword123!  # ä¿®æ”¹ä¸ºå¼ºå¯†ç 
DB_NAME=imagentx

# JWTå¯†é’¥ï¼ˆå¿…é¡»æ›´æ”¹ï¼‰
JWT_SECRET=YourVerySecureJWTSecretKeyHereChangeThisInProduction  # ä¿®æ”¹ä¸ºå¼ºå¯†é’¥

# ç®¡ç†å‘˜è´¦æˆ·
IMAGENTX_ADMIN_EMAIL=admin@imagentx.top
IMAGENTX_ADMIN_PASSWORD=AdminSecurePassword123!  # ä¿®æ”¹ä¸ºå¼ºå¯†ç 

# SSLè¯ä¹¦é‚®ç®±
SSL_EMAIL=admin@imagentx.top

# å‘é‡å­˜å‚¨é…ç½®ï¼ˆå¯é€‰ï¼‰
EMBEDDING_ENABLED=false

# åŸŸåé…ç½®
DOMAIN=imagentx.top
```

**ä¿å­˜æ–‡ä»¶**: æŒ‰ `Ctrl+X`ï¼Œç„¶åæŒ‰ `Y`ï¼Œæœ€åæŒ‰ `Enter`

### æ­¥éª¤4: è®¾ç½®æœåŠ¡å™¨ç¯å¢ƒ (15åˆ†é’Ÿ)

#### 4.1 ç»™è„šæœ¬æ‰§è¡Œæƒé™
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
chmod +x *.sh
```

#### 4.2 æ‰§è¡Œç¯å¢ƒè®¾ç½®
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
./quick-deploy.sh --setup
```

**é¢„æœŸè¾“å‡º**:
```
ğŸ”§ è®¾ç½®æœåŠ¡å™¨ç¯å¢ƒ
--------------------------------
æ›´æ–°ç³»ç»Ÿ...
å®‰è£…å¿…è¦å·¥å…·...
å®‰è£…Docker...
å®‰è£…Docker Compose...
é…ç½®é˜²ç«å¢™...
âœ… æœåŠ¡å™¨ç¯å¢ƒè®¾ç½®å®Œæˆ
```

**å¦‚æœé‡åˆ°é”™è¯¯**:
- Dockerå®‰è£…å¤±è´¥: æ£€æŸ¥ç½‘ç»œè¿æ¥
- æƒé™é—®é¢˜: ç¡®ä¿ä»¥rootç”¨æˆ·æ‰§è¡Œ
- é˜²ç«å¢™é…ç½®å¤±è´¥: æ‰‹åŠ¨æ‰§è¡Œ `ufw allow 22/tcp && ufw allow 80/tcp && ufw allow 443/tcp && ufw enable`

### æ­¥éª¤5: éƒ¨ç½²é¡¹ç›® (20åˆ†é’Ÿ)

#### 5.1 æ‰§è¡Œå®Œæ•´éƒ¨ç½²
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
./quick-deploy.sh --deploy
```

**é¢„æœŸè¾“å‡º**:
```
ğŸš€ éƒ¨ç½²é¡¹ç›®
--------------------------------
ğŸ“‹ ç¯å¢ƒæ£€æŸ¥
âœ… ç¯å¢ƒæ£€æŸ¥é€šè¿‡
ğŸš€ éƒ¨ç½²æœåŠ¡
æ„å»ºå¹¶å¯åŠ¨æœåŠ¡...
ç­‰å¾…æœåŠ¡å¯åŠ¨...
ğŸ“Š æœåŠ¡çŠ¶æ€æ£€æŸ¥
âœ… éƒ¨ç½²å®Œæˆ
```

#### 5.2 æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
./quick-deploy.sh --status
```

**é¢„æœŸè¾“å‡º**:
```
ğŸ“Š æ£€æŸ¥çŠ¶æ€
--------------------------------
âœ… PostgreSQL: è¿è¡Œä¸­
âœ… RabbitMQ: è¿è¡Œä¸­
âœ… åç«¯æœåŠ¡: è¿è¡Œä¸­
âœ… å‰ç«¯æœåŠ¡: è¿è¡Œä¸­
âœ… Nginx: è¿è¡Œä¸­
âœ… Certbot: è¿è¡Œä¸­
```

### æ­¥éª¤6: éªŒè¯éƒ¨ç½² (15åˆ†é’Ÿ)

#### 6.1 åœ¨Macä¸Šæµ‹è¯•DNSè§£æ
```bash
# åœ¨Macç»ˆç«¯ä¸­æ‰§è¡Œï¼ˆæ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼‰
cd /Users/Meteorkid/Downloads/ImagentX-master
./check-dns.sh --check
```

**é¢„æœŸè¾“å‡º**:
```
ğŸŒ DNSé…ç½®å®Œæ•´æ£€æŸ¥
==================================
ğŸ”§ æ£€æŸ¥DNSæœåŠ¡å™¨é…ç½®...
ğŸ” ä½¿ç”¨nslookupæ£€æŸ¥DNSè§£æ...
æ£€æŸ¥ä¸»åŸŸå: imagentx.top
Server:         8.8.8.8
Address:        8.8.8.8#53

Non-authoritative answer:
Name:   imagentx.top
Address: [æ‚¨çš„æœåŠ¡å™¨IP]

âœ… DNSé…ç½®æ£€æŸ¥å®Œæˆ
```

#### 6.2 æµ‹è¯•ç½‘ç«™è®¿é—®
```bash
# åœ¨Macç»ˆç«¯ä¸­æ‰§è¡Œ
curl -I https://imagentx.top
```

**é¢„æœŸè¾“å‡º**:
```
HTTP/2 200
server: nginx/1.18.0
content-type: text/html; charset=utf-8
```

#### 6.3 æµ‹è¯•APIæ¥å£
```bash
# åœ¨Macç»ˆç«¯ä¸­æ‰§è¡Œ
curl https://imagentx.top/api/health
```

**é¢„æœŸè¾“å‡º**:
```json
{"status":"UP","timestamp":"2024-01-01T12:00:00.000Z"}
```

#### 6.4 æµè§ˆå™¨è®¿é—®æµ‹è¯•
1. æ‰“å¼€æµè§ˆå™¨
2. è®¿é—®: https://imagentx.top
3. åº”è¯¥çœ‹åˆ°ImagentXç™»å½•é¡µé¢

## ğŸ” è¯¦ç»†éªŒè¯æ£€æŸ¥

### ä½¿ç”¨éƒ¨ç½²æ£€æŸ¥æ¸…å•
```bash
# åœ¨Macç»ˆç«¯ä¸­æ‰§è¡Œ
cat éƒ¨ç½²æ£€æŸ¥æ¸…å•.md
```

**é€é¡¹æ£€æŸ¥**:
- [ ] æœåŠ¡å™¨ç¯å¢ƒè®¾ç½®å®Œæˆ
- [ ] é¡¹ç›®ä»£ç ä¸Šä¼ æˆåŠŸ
- [ ] ç¯å¢ƒå˜é‡é…ç½®å®Œæˆ
- [ ] éƒ¨ç½²è„šæœ¬æ‰§è¡ŒæˆåŠŸ
- [ ] æ‰€æœ‰æœåŠ¡å¯åŠ¨æ­£å¸¸
- [ ] DNSè§£æç”Ÿæ•ˆ
- [ ] ç½‘ç«™å¯æ­£å¸¸è®¿é—®
- [ ] SSLè¯ä¹¦è·å–æˆåŠŸ
- [ ] ç®¡ç†å‘˜ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] APIæ¥å£å“åº”æ­£å¸¸

### æœåŠ¡å¥åº·æ£€æŸ¥
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
docker-compose -f docker-compose-production.yml ps
```

**é¢„æœŸè¾“å‡º**:
```
Name                    Command               State           Ports
imagentx-backend-prod   java -jar target/im ...   Up      0.0.0.0:8088->8088/tcp
imagentx-frontend-prod  node server.js            Up      0.0.0.0:3000->3000/tcp
imagentx-nginx-prod     /docker-entrypoint.sh     Up      0.0.0.0:443->443/tcp
imagentx-postgres-prod  docker-entrypoint.sh      Up      0.0.0.0:5432->5432/tcp
imagentx-rabbitmq-prod  docker-entrypoint.sh      Up      0.0.0.0:5672->5672/tcp
```

### SSLè¯ä¹¦éªŒè¯
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
docker logs imagentx-certbot
```

**é¢„æœŸè¾“å‡º**:
```
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Plugins selected: Authenticator webroot, Installer None
Obtaining a new certificate
Performing the following challenges:
http-01 challenge for imagentx.top
Waiting for verification...
Cleaning up challenges
IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at:
   /etc/letsencrypt/live/imagentx.top/fullchain.pem
```

## ğŸš¨ å¸¸è§é—®é¢˜è§£å†³

### 1. éƒ¨ç½²å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
./quick-deploy.sh --logs

# é‡å¯æœåŠ¡
./quick-deploy.sh --restart
```

### 2. DNSè§£æå¤±è´¥
```bash
# æ£€æŸ¥DNSé…ç½®
nslookup imagentx.top

# ç­‰å¾…DNSç”Ÿæ•ˆï¼ˆæœ€å¤š30åˆ†é’Ÿï¼‰
```

### 3. SSLè¯ä¹¦è·å–å¤±è´¥
```bash
# æ£€æŸ¥Certbotæ—¥å¿—
docker logs imagentx-certbot

# æ‰‹åŠ¨è·å–è¯ä¹¦
docker exec imagentx-certbot certbot certonly --webroot -w /var/www/certbot -d imagentx.top
```

### 4. æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps -a

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs [å®¹å™¨åç§°]

# é‡å¯ç‰¹å®šæœåŠ¡
docker-compose -f docker-compose-production.yml restart [æœåŠ¡å]
```

## ğŸ‰ éƒ¨ç½²æˆåŠŸç¡®è®¤

### æœ€ç»ˆéªŒè¯
1. **ç½‘ç«™è®¿é—®**: https://imagentx.top âœ…
2. **SSLè¯ä¹¦**: æµè§ˆå™¨æ˜¾ç¤ºå®‰å…¨é” âœ…
3. **ç®¡ç†å‘˜ç™»å½•**: https://imagentx.top/login âœ…
4. **APIæ¥å£**: https://imagentx.top/api/health âœ…

### ç®¡ç†å‘˜è´¦æˆ·ä¿¡æ¯
- **é‚®ç®±**: admin@imagentx.top
- **å¯†ç **: æ‚¨åœ¨.env.productionä¸­è®¾ç½®çš„å¯†ç 

### è®¿é—®åœ°å€
- **ä¸»ç«™**: https://imagentx.top
- **ç®¡ç†åå°**: https://imagentx.top/login
- **APIæ–‡æ¡£**: https://imagentx.top/api
- **å¥åº·æ£€æŸ¥**: https://imagentx.top/health

## ğŸ“ åç»­ç»´æŠ¤

### å¸¸ç”¨å‘½ä»¤
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
ssh root@[æ‚¨çš„æœåŠ¡å™¨IP] "cd /opt/imagentx && ./quick-deploy.sh --status"

# æŸ¥çœ‹æ—¥å¿—
ssh root@[æ‚¨çš„æœåŠ¡å™¨IP] "cd /opt/imagentx && ./quick-deploy.sh --logs"

# é‡å¯æœåŠ¡
ssh root@[æ‚¨çš„æœåŠ¡å™¨IP] "cd /opt/imagentx && ./quick-deploy.sh --restart"

# æ›´æ–°éƒ¨ç½²
ssh root@[æ‚¨çš„æœåŠ¡å™¨IP] "cd /opt/imagentx && ./quick-deploy.sh --update"
```

**æ­å–œï¼æ‚¨çš„ImagentXé¡¹ç›®å·²æˆåŠŸéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼** ğŸš€

ç°åœ¨æ‚¨å¯ä»¥é€šè¿‡ https://imagentx.top è®¿é—®æ‚¨çš„ç½‘ç«™äº†ï¼
