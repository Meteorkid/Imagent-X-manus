# ğŸš€ ImagentX æœåŠ¡å™¨éƒ¨ç½²å®Œæ•´æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡æ¸…å•

### 1. æœåŠ¡å™¨è¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Ubuntu 20.04+ / CentOS 8+ / Debian 11+
- **å†…å­˜**: æœ€å°‘ 4GB RAMï¼ˆæ¨è 8GB+ï¼‰
- **å­˜å‚¨**: æœ€å°‘ 20GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: å…¬ç½‘IPï¼Œ80å’Œ443ç«¯å£å¼€æ”¾
- **å¸¦å®½**: æ¨è 5Mbps+

### 2. åŸŸåè¦æ±‚
- **åŸŸå**: imagentx.topï¼ˆå·²è´­ä¹°ï¼‰
- **DNSç®¡ç†**: å¯ä»¥ä¿®æ”¹DNSè®°å½•
- **è§£ææ—¶é—´**: é€šå¸¸éœ€è¦5-30åˆ†é’Ÿç”Ÿæ•ˆ

### 3. è½¯ä»¶è¦æ±‚
- **Docker**: 20.10+
- **Docker Compose**: 2.0+
- **Git**: æœ€æ–°ç‰ˆæœ¬

## ğŸ”§ æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡

### æ­¥éª¤1: è¿æ¥æœåŠ¡å™¨
```bash
# SSHè¿æ¥åˆ°æ‚¨çš„æœåŠ¡å™¨
ssh root@your-server-ip

# æ›´æ–°ç³»ç»Ÿ
apt update && apt upgrade -y
```

### æ­¥éª¤2: å®‰è£…Docker
```bash
# å®‰è£…Docker
curl -fsSL https://get.docker.com | sh

# å¯åŠ¨DockeræœåŠ¡
systemctl start docker
systemctl enable docker

# éªŒè¯å®‰è£…
docker --version
```

### æ­¥éª¤3: å®‰è£…Docker Compose
```bash
# å®‰è£…Docker Compose
curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose

# éªŒè¯å®‰è£…
docker-compose --version
```

### æ­¥éª¤4: é…ç½®é˜²ç«å¢™
```bash
# å¼€æ”¾å¿…è¦ç«¯å£
ufw allow 22/tcp    # SSH
ufw allow 80/tcp    # HTTP
ufw allow 443/tcp   # HTTPS
ufw enable

# éªŒè¯ç«¯å£å¼€æ”¾
ufw status
```

## ğŸŒ DNSé…ç½®

### æ­¥éª¤1: ç™»å½•åŸŸåç®¡ç†é¢æ¿
è®¿é—®æ‚¨çš„åŸŸåæ³¨å†Œå•†ç®¡ç†é¢æ¿ï¼ˆå¦‚é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰ï¼‰

### æ­¥éª¤2: æ·»åŠ DNSè®°å½•
```
ç±»å‹    åç§°    å€¼              è¯´æ˜
A       @       your-server-ip  ä¸»åŸŸåè§£æ
A       www     your-server-ip  wwwå­åŸŸåè§£æ
```

### æ­¥éª¤3: éªŒè¯DNSè§£æ
```bash
# åœ¨æœ¬åœ°éªŒè¯DNSè§£æ
nslookup imagentx.top
nslookup www.imagentx.top
```

## ğŸ“¦ ä»£ç éƒ¨ç½²

### æ­¥éª¤1: å…‹éš†é¡¹ç›®
```bash
# åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºé¡¹ç›®ç›®å½•
mkdir -p /opt/imagentx
cd /opt/imagentx

# å…‹éš†é¡¹ç›®ï¼ˆæ›¿æ¢ä¸ºæ‚¨çš„ä»“åº“åœ°å€ï¼‰
git clone https://github.com/your-username/ImagentX.git .
# æˆ–è€…ä¸Šä¼ é¡¹ç›®æ–‡ä»¶åˆ°æœåŠ¡å™¨
```

### æ­¥éª¤2: é…ç½®ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp env.production.template .env.production

# ç¼–è¾‘ç¯å¢ƒå˜é‡æ–‡ä»¶
nano .env.production
```

**é‡è¦é…ç½®é¡¹ï¼š**
```bash
# æ•°æ®åº“é…ç½®
DB_USER=imagentx_user
DB_PASSWORD=your_secure_password_here
DB_NAME=imagentx

# JWTå¯†é’¥ï¼ˆå¿…é¡»æ›´æ”¹ï¼‰
JWT_SECRET=your_very_secure_jwt_secret_key_here

# ç®¡ç†å‘˜è´¦æˆ·
IMAGENTX_ADMIN_EMAIL=admin@imagentx.top
IMAGENTX_ADMIN_PASSWORD=your_admin_password_here

# SSLè¯ä¹¦é‚®ç®±
SSL_EMAIL=admin@imagentx.top

# åŸŸåé…ç½®
DOMAIN=imagentx.top
```

### æ­¥éª¤3: ç»™éƒ¨ç½²è„šæœ¬æ‰§è¡Œæƒé™
```bash
chmod +x deploy-production.sh
```

## ğŸš€ æ‰§è¡Œéƒ¨ç½²

### æ­¥éª¤1: åˆå§‹åŒ–éƒ¨ç½²
```bash
# æ‰§è¡Œåˆå§‹åŒ–éƒ¨ç½²
./deploy-production.sh --init
```

**é¢„æœŸè¾“å‡ºï¼š**
```
ğŸ“‹ ç¯å¢ƒæ£€æŸ¥
--------------------------------
âœ… ç¯å¢ƒæ£€æŸ¥é€šè¿‡
ğŸš€ åˆå§‹åŒ–éƒ¨ç½²
--------------------------------
å¯åŠ¨åŸºç¡€æœåŠ¡...
ç­‰å¾…æœåŠ¡å¯åŠ¨...
åˆå§‹åŒ–æ•°æ®åº“...
âœ… åˆå§‹åŒ–å®Œæˆ
```

### æ­¥éª¤2: å®Œæ•´éƒ¨ç½²
```bash
# æ‰§è¡Œå®Œæ•´éƒ¨ç½²
./deploy-production.sh --deploy
```

**é¢„æœŸè¾“å‡ºï¼š**
```
ğŸ“‹ ç¯å¢ƒæ£€æŸ¥
--------------------------------
âœ… ç¯å¢ƒæ£€æŸ¥é€šè¿‡
ğŸš€ éƒ¨ç½²æœåŠ¡
--------------------------------
æ„å»ºå¹¶å¯åŠ¨æœåŠ¡...
ç­‰å¾…æœåŠ¡å¯åŠ¨...
ğŸ“Š æœåŠ¡çŠ¶æ€æ£€æŸ¥
--------------------------------
âœ… éƒ¨ç½²å®Œæˆ
```

### æ­¥éª¤3: éªŒè¯éƒ¨ç½²
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
./deploy-production.sh --status

# æµ‹è¯•ç½‘ç«™è®¿é—®
curl -I https://imagentx.top
curl -I https://imagentx.top/api/health
```

## ğŸ”’ SSLè¯ä¹¦é…ç½®

### è‡ªåŠ¨SSLè¯ä¹¦ï¼ˆæ¨èï¼‰
é¡¹ç›®å·²é…ç½®Let's Encryptè‡ªåŠ¨SSLè¯ä¹¦ï¼š
- é¦–æ¬¡è®¿é—®æ—¶è‡ªåŠ¨è·å–è¯ä¹¦
- è¯ä¹¦è‡ªåŠ¨ç»­æœŸ
- æ— éœ€æ‰‹åŠ¨é…ç½®

### æ‰‹åŠ¨SSLè¯ä¹¦ï¼ˆå¯é€‰ï¼‰
å¦‚æœéœ€è¦ä½¿ç”¨è‡ªå·±çš„SSLè¯ä¹¦ï¼š

1. **ä¸Šä¼ è¯ä¹¦æ–‡ä»¶**
```bash
mkdir -p config/ssl
# ä¸Šä¼ è¯ä¹¦æ–‡ä»¶åˆ° config/ssl/ ç›®å½•
```

2. **ä¿®æ”¹Nginxé…ç½®**
```bash
# ç¼–è¾‘Nginxé…ç½®
nano config/nginx/nginx-production.conf
```

3. **é‡å¯æœåŠ¡**
```bash
docker-compose -f docker-compose-production.yml restart nginx
```

## ğŸ“Š éƒ¨ç½²éªŒè¯

### åŠŸèƒ½æµ‹è¯•
```bash
# æµ‹è¯•å‰ç«¯è®¿é—®
curl -I https://imagentx.top

# æµ‹è¯•åç«¯API
curl https://imagentx.top/api/health

# æµ‹è¯•å¥åº·æ£€æŸ¥
curl https://imagentx.top/health
```

### æœåŠ¡çŠ¶æ€æ£€æŸ¥
```bash
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨çŠ¶æ€
docker-compose -f docker-compose-production.yml ps

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose -f docker-compose-production.yml logs -f
```

## ğŸ”§ å¸¸ç”¨ç®¡ç†å‘½ä»¤

### æœåŠ¡ç®¡ç†
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./deploy-production.sh --status

# é‡å¯æœåŠ¡
./deploy-production.sh --restart

# åœæ­¢æœåŠ¡
./deploy-production.sh --stop

# æŸ¥çœ‹æ—¥å¿—
./deploy-production.sh --logs
```

### æ›´æ–°éƒ¨ç½²
```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# é‡æ–°éƒ¨ç½²
./deploy-production.sh --update
```

### å¤‡ä»½æ•°æ®
```bash
# åˆ›å»ºå¤‡ä»½
./deploy-production.sh --backup
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **SSLè¯ä¹¦è·å–å¤±è´¥**
   ```bash
   # æ£€æŸ¥åŸŸåè§£æ
   nslookup imagentx.top
   
   # æ£€æŸ¥80ç«¯å£æ˜¯å¦å¼€æ”¾
   netstat -tlnp | grep :80
   
   # æŸ¥çœ‹certbotæ—¥å¿—
   docker logs imagentx-certbot
   ```

2. **æœåŠ¡å¯åŠ¨å¤±è´¥**
   ```bash
   # æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
   docker-compose -f docker-compose-production.yml logs
   
   # æ£€æŸ¥ç«¯å£å ç”¨
   netstat -tlnp | grep -E ":(80|443|3000|8088)"
   ```

3. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   ```bash
   # æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
   docker exec imagentx-postgres-prod psql -U imagentx_user -d imagentx -c "SELECT version();"
   ```

4. **å‰ç«¯æ— æ³•è®¿é—®**
   ```bash
   # æ£€æŸ¥å‰ç«¯å®¹å™¨çŠ¶æ€
   docker logs imagentx-frontend-prod
   
   # æ£€æŸ¥ç½‘ç»œé…ç½®
   docker network ls
   ```

### æ€§èƒ½ä¼˜åŒ–

1. **å¯ç”¨Gzipå‹ç¼©**ï¼ˆå·²é…ç½®ï¼‰
2. **é™æ€èµ„æºç¼“å­˜**ï¼ˆå·²é…ç½®ï¼‰
3. **æ•°æ®åº“ä¼˜åŒ–**
   ```bash
   # æ ¹æ®è®¿é—®é‡è°ƒæ•´è¿æ¥æ± 
   # åœ¨.env.productionä¸­é…ç½®
   ```

4. **CDNé…ç½®**ï¼ˆå¯é€‰ï¼‰
   - é…ç½®CDNåŠ é€Ÿé™æ€èµ„æº
   - é…ç½®CDNåŠ é€Ÿå›¾ç‰‡å’Œæ–‡ä»¶

## ğŸ“ˆ ç›‘æ§å’Œç»´æŠ¤

### ç³»ç»Ÿç›‘æ§
```bash
# æŸ¥çœ‹ç³»ç»Ÿèµ„æºä½¿ç”¨
docker stats

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
df -h

# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h
```

### æ—¥å¿—ç®¡ç†
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
docker-compose -f docker-compose-production.yml logs -f

# æŸ¥çœ‹Nginxè®¿é—®æ—¥å¿—
docker exec imagentx-nginx-prod tail -f /var/log/nginx/access.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
docker exec imagentx-nginx-prod tail -f /var/log/nginx/error.log
```

### å®šæœŸç»´æŠ¤
```bash
# æ¸…ç†æœªä½¿ç”¨çš„Dockerèµ„æº
docker system prune -a

# æ›´æ–°Dockeré•œåƒ
docker-compose -f docker-compose-production.yml pull

# é‡å¯æœåŠ¡
./deploy-production.sh --restart
```

## ğŸ¯ éƒ¨ç½²å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡å®Œæˆ
- [ ] DNSè§£æé…ç½®æ­£ç¡®
- [ ] é¡¹ç›®ä»£ç ä¸Šä¼ åˆ°æœåŠ¡å™¨
- [ ] ç¯å¢ƒå˜é‡é…ç½®å®Œæˆ
- [ ] åˆå§‹åŒ–éƒ¨ç½²æˆåŠŸ
- [ ] å®Œæ•´éƒ¨ç½²æˆåŠŸ
- [ ] SSLè¯ä¹¦è·å–æˆåŠŸ
- [ ] å‰ç«¯è®¿é—®æ­£å¸¸
- [ ] åç«¯APIæ­£å¸¸
- [ ] å¥åº·æ£€æŸ¥é€šè¿‡
- [ ] ç®¡ç†å‘˜è´¦æˆ·å¯ç™»å½•

## ğŸ‰ éƒ¨ç½²å®Œæˆ

æ­å–œï¼æ‚¨çš„ImagentXé¡¹ç›®å·²æˆåŠŸéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚

### è®¿é—®åœ°å€
- **ä¸»ç«™**: https://imagentx.top
- **åç«¯API**: https://imagentx.top/api
- **å¥åº·æ£€æŸ¥**: https://imagentx.top/health
- **ç®¡ç†å‘˜ç™»å½•**: https://imagentx.top/login

### ç®¡ç†å‘˜è´¦æˆ·
- **é‚®ç®±**: admin@imagentx.top
- **å¯†ç **: æ‚¨åœ¨.env.productionä¸­è®¾ç½®çš„å¯†ç 

### æŠ€æœ¯æ”¯æŒ
å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. æœåŠ¡æ—¥å¿—
2. å®¹å™¨çŠ¶æ€
3. ç½‘ç»œé…ç½®
4. DNSè§£æ

**æ‚¨çš„ImagentXé¡¹ç›®ç°åœ¨å·²ç»åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œï¼** ğŸš€
